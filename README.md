# AbituraBot

## Описание
Телеграмм бот помощник абитуриенту, подскажет информацию о факультете или программе. Имеет функционал регистрации абитуриентов и подачи заявок в приемную комиссию. Поддерживает два вида пользователей с доступой "член приёмной комиссии" и "абитуриент".

## Технологии
- [ ] Python
- [ ] python-telegram-bot
- [ ] API GigaChat
- [ ] Pymongo

## Запуск
```soon```

## Управление

```/help``` - список команд
```/start``` - запустит интерфейс регистрации
```/cancel``` - отменит текущую операцию
```/show_info <название факультета>``` - выведет информацию об факультете
```/ask_info <название факультета> <вопрос>```  - задать вопрос про факультет
```/app``` - подать документы на программу
```/show_apps``` - покажет список всех поданных заявок и их статусы (каждое из заявлений можно будет отозвать ```\delete``` и редактировать, а затем отправить ```\edit```
```/get_app``` - команда для пользователей с доступом "член приемной комиссии", выдает на ревью заявление и запускает интерфейс проверки.

## Архитектура
### Классы
  * ``` Application ``` - класс для хранения каждого заявления
  * ``` User ``` - класс для хранения информации о каждом пользователе
  * ```Router``` -  операции с БД
  * ```Gpt``` - операции с GigaChat
  * ```Process``` - обработка команд
### Наполнение классов

### Application
  ##### Поля
    pass_id: str - паспорт
    snils_id: str - снилс
    id_app: str - уникальный номер заявления
    url_docs: str - ссылка на гугл диск с документами
    name_program: str - название программы на котрую было подано заявление
    is_bvi: bool - конкурсная группа
    count_ege: int - сумма балов егэ
    state: str - статус заявления
    comment: str - комментарий проверяющего
  ##### Методы
    to_str() -> str - преобразует к строке все поля класса и выведет читабельным текстом
    
    static
    to_json(ob: Application) -> dict - вернёт словарь из полей класса

    static
    from_json(data: dict) -> Application - преобразует словарь из полей класса в класс с этими полями

    
### User
  ##### Поля
    user_id: str - тег пользователя
    apps: List[Application] - поданные заявки
  ##### Методы
    to_str() -> str - вернет список всех заявок
    
    static
    to_json(ob: Application) -> dict - вернёт словарь из полей класса

    static
    from_json(data: dict) -> Application - преобразует словарь из полей класса в класс с этими полями

### Gpt
  ##### Поля
    token_ai: str - токкен для гпт
  ##### Методы
    static
    query(text: str) -> str - кидает запрос в гпт через gigachat

### Router(telegram.ext.BasePersistence)
  ##### Поля
    mongo_db: pymongo.database.Database
  #### Методы
    get_users() -> {int : user} - возвращает User всех пользователей.
    update_users(user_id: int, data: User) -> None - обновляет в бд данные для user_id.
    update_conversations() -> None - обновляет бд telegram.ext.ConversationHandler.

### Process
  #### Методы
    help  - обрабатывает команду /help.
    start - обрабатывает команду /start
    cancel - обрабатывает команду /cancel
    show_info - обрабатывает команду /show_info
    ask_info - обрабатывает команду /ask_info
    application - обрабатывает команду /app
    show_app - обрабатывает команду /show_apps
    get_app - обрабатывает команду /get_app
